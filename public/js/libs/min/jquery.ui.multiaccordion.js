(function(e){e.widget("ui.multiAccordion",{options:{active:0,showAll:null,hideAll:null,_classes:{accordion:"ui-accordion ui-widget ui-helper-reset ui-accordion-icons",h3:"ui-accordion-header ui-helper-reset ui-state-default ui-corner-all",div:"ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom",divActive:"ui-accordion-content-active",span:"ui-icon ui-icon-triangle-1-e",stateDefault:"ui-state-default",stateHover:"ui-state-hover"}},_create:function(){var a=this,c=a.options,d=a.element,
b=d.children("h3");d.children("div");d.addClass(c._classes.accordion);b.each(function(d){var b=e(this);b.addClass(c._classes.h3).prepend('<span class="'+c._classes.span+'"></span>');a._isActive(d)&&a._showTab(b)});d.children("div").each(function(){e(this).addClass(c._classes.div)});b.bind("click",function(b){b.preventDefault();var b=e(this),d={tab:b,content:b.next("div")};a._trigger("click",null,d);b.hasClass(c._classes.stateDefault)?a._showTab(b):a._hideTab(b)});b.bind("mouseover",function(){e(this).addClass(c._classes.stateHover)});
b.bind("mouseout",function(){e(this).removeClass(c._classes.stateHover)});a._trigger("init",null,d)},destroy:function(){var a=this.element,c=a.children("h3"),d=a.children("div"),b=this.options;a.children("h3").unbind("click mouseover mouseout");a.removeClass(b._classes.accordion);c.removeClass(b._classes.h3).removeClass("ui-state-default ui-corner-all ui-state-active ui-corner-top").children("span").remove();d.removeClass(b._classes.div+" "+b._classes.divActive).show()},_showTab:function(a){var c=
a.children("span.ui-icon"),d=a.next(),b=this.options;a.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top");c.removeClass("ui-icon-triangle-1-e").addClass("ui-icon-triangle-1-s");d.slideDown("fast",function(){d.addClass(b._classes.divActive)});a={tab:a,content:a.next("div")};this._trigger("tabShown",null,a)},_hideTab:function(a){var c=a.children("span.ui-icon"),d=a.next(),b=this.options;a.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all");
c.removeClass("ui-icon-triangle-1-s").addClass("ui-icon-triangle-1-e");d.slideUp("fast",function(){d.removeClass(b._classes.divActive)});a={tab:a,content:a.next("div")};this._trigger("tabHidden",null,a)},_isActive:function(a){var c=this.options;if("boolean"!=typeof c.active||c.active)if(void 0!==c.active.length)for(var d=0;d<c.active.length;d++){if(c.active[d]==a)return!0}else return c.active==a;return!1},_getActiveTabs:function(){var a=[];this.element.children("div").each(function(c){var d=e(this);
d.is(":visible")&&a.push({index:c,tab:d.prev("h3"),content:d})});return 0===a.length?void 0:a},getActiveTabs:function(){var a=[];this.element.children("div").each(function(c){e(this).is(":visible")&&a.push(c)});return 0===a.length?[-1]:a},_setActiveTabs:function(a){var c=this,d=this.element;e.isArray(a)?d.children("div").each(function(b){var d=e(this).prev("h3");a.hasObject(b)?c._showTab(d):c._hideTab(d)}):"object"===typeof a&&c._showTab(a)},_generateTabsArrayFromOptions:function(a){var c=[],d=this.element.children("h3").size(),
b=e.type(a);if("array"===b||"object"===b)return a;if("number"===b)return[a];if("string"===b)switch(a.toLowerCase()){case "all":for(a=0;a<d;a++)c.push(a);return c;case "none":return c=[-1]}},_setOption:function(a,c){e.Widget.prototype._setOption.apply(this,arguments);var d=this.element;switch(a){case "active":this._setActiveTabs(this._generateTabsArrayFromOptions(c));break;case "getActiveTabs":var b;d.children("div").each(function(a){e(this).is(":visible")&&(b=b?b:[],b.push(a))});return 0===b.length?
[-1]:b}}});Array.prototype.hasObject=!Array.indexOf?function(a){for(var c=this.length+1;c--;)if(this[c-1]===a)return!0;return!1}:function(a){return-1!==this.indexOf(a)}})(jQuery);
