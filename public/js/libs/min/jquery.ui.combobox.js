(function(c){c.widget("ui.combobox",{options:{change:null,readonlyInput:!1,select:null,validator:null},_create:function(){var a=this,b=this.element.hide(),e=b.children(":selected"),e=e.val()?e.text():"",g=c('<span class="input-clear-icon"></span>'),f=c("<div/>").html(e),d=this.input=c("<input>");d.attr("class",b.attr("class"));d.width(b.width());e=f.text();f.remove();"disabled"===b.attr("disabled")&&d.attr("disabled",!0);a.options.readonlyInput&&d.attr("readonly",!0);d.insertAfter(b).val(e).attr("placeholder",
"Search...").autocomplete({delay:0,minLength:0,source:function(a,d){var e=RegExp(c.ui.autocomplete.escapeRegex(a.term),"i");d(b.children("option").map(function(){var b=c(this).attr("htmllabel");if(this.value&&(!a.term||e.test(b)))return{label:b.replace(RegExp("(?![^&;]+;)(?!<[^<>]*)("+c.ui.autocomplete.escapeRegex(a.term)+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>"),value:b.replace(/<\/?span[^>]*>/g,""),option:this}}))},select:function(d,e){e.item.option.selected=!0;a._trigger("selected",
d,{item:e.item.option});null!==a.options.select&&"function"===typeof a.options.select&&a.options.select(e.item.option);c(this).next().fadeIn(300);c(this).blur();null!==a.options.validator&&"object"===typeof a.options.validator&&a.options.validator.element(b)},change:function(e,h){if(!h.item){var g=RegExp("^"+c.ui.autocomplete.escapeRegex(c(this).val())+"$","i"),f=!1;b.children("option").each(function(){if(c(this).text().match(g))return this.selected=f=!0,null!==a.options.validator&&"object"===typeof a.options.validator&&
a.options.validator.element(b),!1});if(!f)return c(this).val("").next().fadeOut(300),b.val(""),d.data("autocomplete").term="",null!==a.options.validator&&"object"===typeof a.options.validator&&a.options.validator.element(b),!1}null!==a.options.validator&&"object"===typeof a.options.validator&&a.options.validator.element(b);b.trigger("change")}}).addClass("ui-widget ui-widget-content ui-corner-left with-clear-icon");d.data("autocomplete")._renderItem=function(a,b){return c("<li></li>").data("item.autocomplete",
b).append("<a>"+b.label+"</a>").appendTo(a)};this.button=c('<button type="button">&nbsp;</button>').attr("tabIndex",-1).attr("title","Show All Items").button({icons:{primary:"ui-icon-triangle-1-s"},text:!1}).removeClass("ui-corner-all").addClass("ui-corner-right ui-button-icon ui-combobox-button");d.keyup(function(){0<c(this).val().length?c(this).next().fadeIn(300):c(this).next().fadeOut(300)});g.insertAfter(d).after(this.button).click(function(){c(this).prev().val("").autocomplete("widget").change();
b.val("");c(this).fadeOut(300)});""===b.val()&&g.hide();"disabled"!==b.attr("disabled")&&this.button.click(function(){d.autocomplete("widget").is(":visible")?d.autocomplete("close"):(c(this).blur(),d.autocomplete("search",""),d.focus())})},destroy:function(){this.input.remove();this.button.remove();this.element.show();c.Widget.prototype.destroy.call(this)},get:function(){return this},value:function(a){var b=this;this.element.children("option").each(function(){if(c(this).val()===a)return""===a?b.input.val("").autocomplete("widget").change():
b.input.val(c(this).attr("htmllabel").replace(/<\/?span[^>]*>/g,"")||c(this).text()).autocomplete("widget").change(),!1})}})})(jQuery);
